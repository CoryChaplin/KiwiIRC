<script>
kiwi.plugins.on('loaded', function() {
    var network = kiwi.components.Network();
    network.on('connect', function() {
		var events = kiwi.events,
			control = kiwi.components.ControlInput();

		events.on('nick:select', function(event, data) {
		    if (data.source !== 'message') {
		        return;
		    }

		    if(data.type === 1) {
			    event.preventDefault();
			    if(control.input.val() !== (data.member.get('nick') + ': ')){
    			    control.input.val(function(idx, val){
    			        return val + data.member.get('nick') + ': ';
    			    });
			    }
		    } else if (data.type === 2) {
			    event.preventDefault();
			    network.createQuery(data.member.get('nick'));
		    }
		});
	});
});
</script>